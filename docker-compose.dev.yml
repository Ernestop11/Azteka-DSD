version: '3.8'

services:
  azteka-sales-dev:
    image: node:22-bullseye
    container_name: azteka_sales_dev
    working_dir: /usr/src/app
    # install with legacy-peer-deps to avoid React 18/19 peer conflicts during quick prototyping
    command: sh -c "npm ci --legacy-peer-deps || npm install --legacy-peer-deps --yes; npm run dev -- --port 3002"
    volumes:
      - ./apps/sales:/usr/src/app:cached
      - /usr/src/app/node_modules
    ports:
      - "3002:3002"
    environment:
      - NODE_ENV=development
      - PORT=3002
    tty: true

# Notes:
# - This dev compose mounts your local source into the container for fast edits.
# - It maps host port 3002 to container 3002. Use --project-name to avoid name conflicts.
# - To start: docker compose -f docker-compose.dev.yml --project-name azteka-proto up --build
# - To stop and remove containers: docker compose -f docker-compose.dev.yml --project-name azteka-proto down
